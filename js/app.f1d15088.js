(function(){"use strict";var t={8591:function(t,e,r){var a=r(9242),o=r(3396);const s={class:"header container"},i={class:"header__wrapper"},l=(0,o._)("a",{class:"header__logo",href:"#"},[(0,o._)("img",{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"})],-1),c=(0,o._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),n=(0,o.uE)('<footer class="footer"><div class="footer__wrapper container"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Moire </span></div></footer><div id="teleport-target"></div>',2);function d(t,e,r,a,d,u){const _=(0,o.up)("router-link"),p=(0,o.up)("CartIndicator"),m=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("header",s,[(0,o._)("div",i,[(0,o.Wm)(_,{class:"header__info",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)("Каталог")])),_:1}),l,c,(0,o.Wm)(p)])]),(0,o.Wm)(m),n],64)}var u=r(7139);const _={key:0},p=(0,o._)("img",{src:"img/svg/1496-30.gif"},null,-1),m=[p],h={key:1},g=(0,o._)("svg",{width:"19",height:"24"},[(0,o._)("use",{"xlink:href":"#icon-cart"})],-1),f=[g],y={class:"header__count","aria-label":"Количество товаров"};function b(t,e,r,a,s,i){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(l,{class:"header__cart",href:"cart.html","aria-label":"Корзина с товарами",to:{name:"cart"}},{default:(0,o.w5)((()=>[!0===t.$store.state.productAddCart?((0,o.wg)(),(0,o.iD)("div",_,m)):((0,o.wg)(),(0,o.iD)("div",h,f)),(0,o._)("span",y,(0,u.zw)(t.$store.state.cartProducts.length),1)])),_:1})}var k={},v=r(89);const w=(0,v.Z)(k,[["render",b]]);var I=w,P=r(65),C={components:{CartIndicator:I},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:{...(0,P.nv)(["loadCart"]),...(0,P.OI)(["updateUserAccessKey"])}};const D=(0,v.Z)(C,[["render",d]]);var z=D,A=r(2483);const U={class:"content container"},F={class:"content__top"},T={class:"content__row"},$=(0,o._)("h1",{class:"content__title"},"Каталог",-1),V={class:"content__info"},x={class:"content__catalog"},K={class:"catalog"},S={class:"content__title"},M=(0,o._)("img",{src:"img/svg/1488.gif"},null,-1),Z={class:"content__title"};function O(t,e,r,s,i,l){const c=(0,o.up)("ProductFilter"),n=(0,o.up)("ProductList"),d=(0,o.up)("BasePagination");return(0,o.wg)(),(0,o.iD)("main",U,[(0,o._)("div",F,[(0,o._)("div",T,[$,(0,o._)("span",V,(0,u.zw)(i.quantityProducts)+" товаров ",1)])]),(0,o._)("div",x,[(0,o.Wm)(c,{"price-from":i.filterPriceFrom,"onUpdate:priceFrom":e[0]||(e[0]=t=>i.filterPriceFrom=t),"price-to":i.filterPriceTo,"onUpdate:priceTo":e[1]||(e[1]=t=>i.filterPriceTo=t),"category-id":i.filterCategoryId,"onUpdate:categoryId":e[2]||(e[2]=t=>i.filterCategoryId=t),"material-ids":i.filterMaterialIds,"onUpdate:materialIds":e[3]||(e[3]=t=>i.filterMaterialIds=t),"season-ids":i.filterSeasonIds,"onUpdate:seasonIds":e[4]||(e[4]=t=>i.filterSeasonIds=t)},null,8,["price-from","price-to","category-id","material-ids","season-ids"]),(0,o._)("section",K,[(0,o.wy)((0,o._)("div",S,[(0,o.Uk)(" Загрузка товаров... "),M],512),[[a.F8,i.productsLoading]]),(0,o.wy)((0,o._)("div",Z,[(0,o.Uk)(" Произошла ошибка при загрузке товаров. "),(0,o._)("button",{onClick:e[5]||(e[5]=(0,a.iM)(((...t)=>l.loadProducts&&l.loadProducts(...t)),["prevent"])),class:"button--primery",style:{padding:"10px 15px"}}," Попробовать еще раз ")],512),[[a.F8,i.productsLoadingFailed]]),(0,o.wy)((0,o.Wm)(n,{products:l.products},null,8,["products"]),[[a.F8,!1===this.productsLoading]]),(0,o.Wm)(d,{modelValue:i.page,"onUpdate:modelValue":e[6]||(e[6]=t=>i.page=t),count:l.countProducts,"per-page":i.productsPerPage},null,8,["modelValue","count","per-page"])])])])}const E={class:"catalog__list"};function W(t,e,r,a,s,i){const l=(0,o.up)("ProductItem");return(0,o.wg)(),(0,o.iD)("ul",E,[(0,o.Wm)(l,{class:"catalog__item",products:r.products},null,8,["products"])])}const L=["src","alt"],j={class:"catalog__title"},Y={href:"#"},q={class:"catalog__price"},H={class:"colors colors--black"},B={class:"colors__label"},N=["value","onClick"];function G(t,e,r,s,i,l){const c=(0,o.up)("router-link");return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productsNormalized,((r,s)=>((0,o.wg)(),(0,o.iD)("li",(0,o.dG)(t.$attrs,{key:r.id}),[(0,o.Wm)(c,{class:"catalog__pic",to:{name:"product",params:{id:r.id}}},{default:(0,o.w5)((()=>[(0,o._)("img",{src:i.productImage[s],alt:r.title},null,8,L)])),_:2},1032,["to"]),(0,o.Wm)(c,{to:{name:"product",params:{id:r.id}}},{default:(0,o.w5)((()=>[(0,o._)("h3",j,[(0,o._)("a",Y,(0,u.zw)(r.title),1)]),(0,o._)("span",q,(0,u.zw)(r.pricePretty)+" ₽ ",1)])),_:2},1032,["to"]),(0,o._)("ul",H,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.colors,((t,s)=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.id},[(0,o._)("label",B,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",value:t.id,"onUpdate:modelValue":e[0]||(e[0]=t=>i.checkedColor=t),onClick:t=>l.changeProductImage(r,s)},null,8,N),[[a.G2,i.checkedColor]]),(0,o._)("span",{class:"colors__value",style:(0,u.j5)({backgroundColor:t.code})},null,4)])])))),128))])],16)))),128)}function Q(t){return(new Intl.NumberFormat).format(t)}var R={data(){return{productImage:[],checkedColor:null}},inheritAttrs:!1,props:["products"],computed:{productsNormalized(){return this.products.map((t=>(this.productImage=this.products.map((t=>t.image[0].map((t=>t)))),{...t,pricePretty:Q(t.price)})))}},methods:{changeProductImage(t,e){this.productsNormalized.find(((r,a)=>{r.id===t.id&&(this.productImage[a]=t.image[e])}))}}};const J=(0,v.Z)(R,[["render",G]]);var X=J,tt={components:{ProductItem:X},props:["products"]};const et=(0,v.Z)(tt,[["render",W]]);var rt=et;const at={class:"catalog__pagination pagination"},ot={class:"pagination__item"},st=["disabled"],it=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-left"})],-1),lt=[it],ct=["onClick"],nt={class:"pagination__item"},dt=["disabled"],ut=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-right"})],-1),_t=[ut];function pt(t,e,r,a,s,i){return(0,o.wg)(),(0,o.iD)("ul",at,[(0,o._)("li",ot,[(0,o._)("button",{class:(0,u.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1==i.page}]),"aria-label":"Предыдущая страница",onClick:e[0]||(e[0]=t=>i.paginateBack()),disabled:1===i.page,style:{cursor:"pointer"}},lt,10,st)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.pages,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"pagination__item",key:t},[(0,o._)("a",{herf:"#",class:(0,u.C_)(["pagination__link",{"pagination__link--current":t===i.page}]),onClick:e=>i.paginate(t),style:{cursor:"pointer"}},(0,u.zw)(t),11,ct)])))),128)),(0,o._)("li",nt,[(0,o._)("button",{class:(0,u.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":i.page===i.pages}]),href:"#","aria-label":"Следующая страница",onClick:e[1]||(e[1]=t=>i.paginateForward()),disabled:i.page===i.pages,style:{cursor:"pointer"}},_t,10,dt)])])}var mt={props:["modelValue","count","perPage"],computed:{page(){return this.modelValue},pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){this.$emit("update:modelValue",t)},paginateForward(){this.$emit("update:modelValue",this.page+1)},paginateBack(){this.$emit("update:modelValue",this.page-1)}}};const ht=(0,v.Z)(mt,[["render",pt]]);var gt=ht;const ft={class:"filter"},yt=(0,o._)("h2",{class:"filter__title"},"Фильтры",-1),bt={class:"form__block"},kt=(0,o._)("legend",{class:"form__legend"},"Цена",-1),vt={class:"form__label form__label--price"},wt=(0,o._)("span",{class:"form__value"},"От",-1),It={class:"form__label form__label--price"},Pt=(0,o._)("span",{class:"form__value"},"До",-1),Ct={class:"form__block"},Dt=(0,o._)("legend",{class:"form__legend"},"Категория",-1),zt={class:"form__label form__label--select"},At=(0,o._)("option",{value:"0"},"Все категории",-1),Ut=["value"],Ft={class:"form__block"},Tt=(0,o._)("legend",{class:"form__legend"},"Материал",-1),$t={class:"check-list"},Vt={class:"check-list__label"},xt=["value"],Kt={class:"check-list__desc"},St={class:"form__block"},Mt=(0,o._)("legend",{class:"form__legend"},"Коллекция",-1),Zt={class:"check-list"},Ot={class:"check-list__label"},Et=["value"],Wt={class:"check-list__desc"},Lt=(0,o._)("button",{class:"filter__submit button button--primery",type:"submit"}," Применить ",-1),jt=["disabled"];function Yt(t,e,r,s,i,l){return(0,o.wg)(),(0,o.iD)("aside",ft,[yt,(0,o._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:e[6]||(e[6]=(0,a.iM)(((...t)=>l.submit&&l.submit(...t)),["prevent"]))},[(0,o._)("fieldset",bt,[kt,(0,o._)("label",vt,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":e[0]||(e[0]=t=>i.currentPriceFrom=t)},null,512),[[a.nr,i.currentPriceFrom,void 0,{number:!0}]]),wt]),(0,o._)("label",It,[(0,o.wy)((0,o._)("input",{class:"form__input",name:"max-price","onUpdate:modelValue":e[1]||(e[1]=t=>i.currentPriceTo=t)},null,512),[[a.nr,i.currentPriceTo,void 0,{number:!0}]]),Pt])]),(0,o._)("fieldset",Ct,[Dt,(0,o._)("label",zt,[(0,o.wy)((0,o._)("select",{class:"form__select",name:"category","onUpdate:modelValue":e[2]||(e[2]=t=>i.currentCategoryId=t)},[At,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.categories,(t=>((0,o.wg)(),(0,o.iD)("option",{value:t.id,key:t.id},(0,u.zw)(t.title),9,Ut)))),128))],512),[[a.bM,i.currentCategoryId]])])]),(0,o._)("fieldset",Ft,[Tt,(0,o._)("ul",$t,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.materials,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"check-list__item",key:t.id},[(0,o._)("label",Vt,[(0,o.wy)((0,o._)("input",{class:"check-list__check sr-only",type:"checkbox",value:t.id,"onUpdate:modelValue":e[3]||(e[3]=t=>i.currentMaterialIds=t)},null,8,xt),[[a.e8,i.currentMaterialIds]]),(0,o._)("span",Kt,[(0,o.Uk)((0,u.zw)(t.title)+" ",1),(0,o._)("span",null,"("+(0,u.zw)(t.productsCount)+")",1)])])])))),128))])]),(0,o._)("fieldset",St,[Mt,(0,o._)("ul",Zt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.seasons,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"check-list__item",key:t.id},[(0,o._)("label",Ot,[(0,o.wy)((0,o._)("input",{class:"check-list__check sr-only",type:"checkbox",value:t.id,"onUpdate:modelValue":e[4]||(e[4]=t=>i.currentSeasonIds=t)},null,8,Et),[[a.e8,i.currentSeasonIds]]),(0,o._)("span",Wt,[(0,o.Uk)((0,u.zw)(t.title)+" ",1),(0,o._)("span",null,"("+(0,u.zw)(t.productsCount)+")",1)])])])))),128))])]),Lt,(0,o._)("button",{class:"filter__reset button button--second",type:"button",disabled:l.notFilterParams,onClick:e[5]||(e[5]=(0,a.iM)(((...t)=>l.reset&&l.reset(...t)),["prevent"]))}," Сбросить ",8,jt)],32)])}r(7658);var qt=r(4161);const Ht="https://vue-moire.skillbox.cc";var Bt={data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentMaterialIds:[],currentSeasonIds:[],categoriesData:null,materialsData:null,seasonsData:null}},props:["priceFrom","priceTo","categoryId","materialIds","seasonIds"],computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},materials(){return this.materialsData?this.materialsData.items:[]},seasons(){return this.seasonsData?this.seasonsData.items:[]},notFilterParams(){return 0===this.currentPriceFrom&&0===this.currentPriceTo&&0===this.categoryId&&0===this.currentMaterialIds.length&&0===this.currentSeasonIds.length}},watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategoryId=t},materialIds(t){this.currentMaterialIds=t},seasonIds(t){this.currentSeasonIds=t}},methods:{submit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:materialIds",this.currentMaterialIds),this.$emit("update:seasonIds",this.currentSeasonIds)},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:materialIds",[]),this.$emit("update:seasonIds",[]),this.$router.push({name:"main"})},loadCategories(){qt.Z.get(`${Ht}/api/productCategories`).then((t=>this.categoriesData=t.data))},loadMaterials(){qt.Z.get(`${Ht}/api/materials`).then((t=>{this.materialsData=t.data}))},loadSeasons(){qt.Z.get(`${Ht}/api/seasons`).then((t=>this.seasonsData=t.data))}},created(){this.loadCategories(),this.loadMaterials(),this.loadSeasons()}};const Nt=(0,v.Z)(Bt,[["render",Yt]]);var Gt=Nt,Qt={components:{ProductList:rt,BasePagination:gt,ProductFilter:Gt},props:["categoryId"],data(){return{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterMaterialIds:[],filterSeasonIds:[],page:1,productsPerPage:12,productsData:null,quantityProducts:0,productsLoading:!1,productsLoadingFailed:!1}},computed:{products(){return this.productsData?this.productsData.items.map((t=>({...t,image:t.colors.map((t=>null===t.gallery?["img/nophoto.jpeg"]:t.gallery.map((t=>t.file.url?t.file.url:[])))),colors:t.colors.map((t=>t.color))}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{qt.Z.get(`${Ht}/api/products`,{params:{page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo,materialIds:this.filterMaterialIds,seasonIds:this.filterSeasonIds}}).then((t=>this.productsData=t.data)).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoading=!1))}),2e3)},loadQuantityProducts(){qt.Z.get(`${Ht}/api/products`).then((t=>this.quantityProducts=t.data.items.length))}},watch:{page(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterMaterialIds(){this.loadProducts()},filterSeasonIds(){this.loadProducts()},"$route.query.categoryId":{handler(){this.filterCategoryId=this.$route.query.categoryId?this.$route.query.categoryId:0},immediate:!0}},created(){this.loadProducts(),this.loadQuantityProducts()}};const Rt=(0,v.Z)(Qt,[["render",O]]);var Jt=Rt;function Xt(t,e,r,a,s,i){return(0,o.wg)(),(0,o.iD)("h1",null,"Страница не найдена")}var te={};const ee=(0,v.Z)(te,[["render",Xt]]);var re=ee;const ae={key:0,class:"content container"},oe={key:1,class:"content container"},se={key:2,class:"content container"},ie={class:"content__top"},le={class:"breadcrumbs"},ce={class:"breadcrumbs__item"},ne={class:"breadcrumbs__item"},de={class:"breadcrumbs__item"},ue={class:"breadcrumbs__link"},_e={class:"item"},pe={class:"item__pics pics"},me={class:"pics__wrapper"},he=["src","alt"],ge={class:"pics__list"},fe=["src","alt"],ye={class:"item__info"},be={class:"item__code"},ke={class:"item__title"},ve={class:"item__form"},we={class:"item__row item__row--center"},Ie={class:"form__counter"},Pe=["disabled"],Ce=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),De=[Ce],ze=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),Ae=[ze],Ue={class:"item__price"},Fe={class:"item__row"},Te={class:"form__block"},$e=(0,o._)("legend",{class:"form__legend"},"Цвет:",-1),Ve={class:"colors colors--black"},xe={class:"colors__label"},Ke=["value","checked","onChange"],Se={class:"form__block"},Me=(0,o._)("legend",{class:"form__legend"},"Размер",-1),Ze={class:"form__label form__label--small form__label--select"},Oe=["value"],Ee=["disabled"],We={class:"header__info"},Le={class:"header__info"},je=(0,o._)("img",{src:"img/svg/1496.gif"},null,-1),Ye={class:"item__desc"},qe={class:"tabs"},He={class:"tabs__item"},Be={class:"tabs__item"},Ne={class:"item__content"},Ge=(0,o.uE)("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),Qe=[Ge],Re={class:"item__content"},Je=(0,o._)("h3",null,"Доставка:",-1),Xe=(0,o._)("p",null,[(0,o.Uk)(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),(0,o._)("br"),(0,o.Uk)(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),(0,o._)("br")],-1),tr=(0,o._)("h3",null,"Возврат:",-1),er=(0,o._)("p",null,[(0,o.Uk)(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),(0,o._)("br"),(0,o.Uk)(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),(0,o._)("br"),(0,o.Uk)(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),(0,o._)("br")],-1),rr=[Je,Xe,tr,er];function ar(t,e,r,s,i,l){const c=(0,o.up)("router-link");return i.productsLoading?((0,o.wg)(),(0,o.iD)("main",ae," Загрузка товаров... ")):i.productData?((0,o.wg)(),(0,o.iD)("main",se,[(0,o._)("div",ie,[(0,o._)("ul",le,[(0,o._)("li",ce,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",ne,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main",query:{categoryId:l.category.id}}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(l.category.title),1)])),_:1},8,["to"])]),(0,o._)("li",de,[(0,o._)("a",ue,(0,u.zw)(l.product.title),1)])])]),(0,o._)("section",_e,[(0,o._)("div",pe,[(0,o._)("div",me,[(0,o._)("img",{width:"570",height:"570",src:i.img,alt:l.product.title},null,8,he)]),(0,o._)("ul",ge,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productImage,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"pics__item",key:t},[(0,o._)("img",{width:"98",height:"98",src:t,onClick:e[0]||(e[0]=(...t)=>l.switchImage&&l.switchImage(...t)),alt:l.product.title},null,8,fe)])))),128))])]),(0,o._)("div",ye,[(0,o._)("span",be,"Артикул: "+(0,u.zw)(l.product.id),1),(0,o._)("h2",ke,(0,u.zw)(l.product.title),1),(0,o._)("div",ve,[(0,o._)("form",{class:"form",action:"#",method:"POST",onSubmit:e[6]||(e[6]=(0,a.iM)(((...t)=>l.addToCart&&l.addToCart(...t)),["prevent"]))},[(0,o._)("div",we,[(0,o._)("div",Ie,[(0,o._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[1]||(e[1]=t=>l.deleteProductAmount()),disabled:i.productAmount<=0},De,8,Pe),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>i.productAmount=t)},null,512),[[a.nr,i.productAmount,void 0,{number:!0}]]),(0,o._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[3]||(e[3]=t=>l.addProductAmount())},Ae)]),(0,o._)("b",Ue,(0,u.zw)(l.pricePretty)+" ₽ ",1)]),(0,o._)("div",Fe,[(0,o._)("fieldset",Te,[$e,(0,o._)("ul",Ve,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productColors,((t,r)=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.id},[(0,o._)("label",xe,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",value:t.id,"onUpdate:modelValue":e[4]||(e[4]=t=>i.productColorId=t),checked:0===r,onChange:t=>l.cahngeImageAndColor(r)},null,40,Ke),[[a.G2,i.productColorId]]),(0,o._)("span",{class:"colors__value",style:(0,u.j5)({backgroundColor:t.code})},null,4)])])))),128))])]),(0,o._)("fieldset",Se,[Me,(0,o._)("label",Ze,[(0,o.wy)((0,o._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":e[5]||(e[5]=t=>i.productSizeId=t)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.product.sizes,(t=>((0,o.wg)(),(0,o.iD)("option",{value:t.id,key:t.id},(0,u.zw)(t.title),9,Oe)))),128))],512),[[a.bM,i.productSizeId,void 0,{number:!0}]])])])]),(0,o._)("button",{class:"item__button button button--primery",type:"submit",disabled:i.productAddSending,style:{"margin-bottom":"20px"}}," В корзину ",8,Ee),(0,o.wy)((0,o._)("div",We," Товар добавлен в корзину ",512),[[a.F8,i.productAdded]]),(0,o.wy)((0,o._)("div",Le,[(0,o.Uk)(" Добавлем Товар в корзину "),je],512),[[a.F8,i.productAddSending]])],32)])]),(0,o._)("div",Ye,[(0,o._)("ul",qe,[(0,o._)("li",He,[(0,o._)("a",{class:(0,u.C_)(["tabs__link",{"tabs__link--current":i.productInfo}]),onClick:e[7]||(e[7]=(...t)=>l.changeProductInfo&&l.changeProductInfo(...t))}," Информация о товаре ",2)]),(0,o._)("li",Be,[(0,o._)("a",{class:(0,u.C_)(["tabs__link",{"tabs__link--current":i.deliveryInfo}]),onClick:e[8]||(e[8]=(...t)=>l.changeDeliveryInfo&&l.changeDeliveryInfo(...t))}," Доставка и возврат ",2)])]),(0,o.wy)((0,o._)("div",Ne,Qe,512),[[a.F8,i.productInfo]]),(0,o.wy)((0,o._)("div",Re,rr,512),[[a.F8,i.deliveryInfo]])])])])):((0,o.wg)(),(0,o.iD)("main",oe," Не удалось загрузить товар "))}var or={data(){return{productAmount:1,productColorId:null,productSizeId:null,productData:null,img:null,productsLoading:!1,productsLoadingFailed:!1,productAdded:!1,productAddSending:!1,productInfo:!0,deliveryInfo:!1}},computed:{product(){return this.productData},category(){return this.productData.category},productColors(){const t=this.product.colors.map((t=>t.color));return t},productImage(){const t=this.product.colors.map((t=>null===t.gallery?[]:t.gallery));return null===t?"img/nophoto.jpeg":t.map((t=>0===t.length?"img/nophoto.jpeg":t.map((t=>t.file.url))))},pricePretty(){return Q(this.product.price)}},methods:{...(0,P.nv)(["addProductToCart"]),addToCart(){this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:this.product.id,amount:this.productAmount,colorId:this.productColorId,sizeId:this.productSizeId}).then((()=>{this.productAdded=!0,this.productAddSending=!1}))},addProductAmount(){this.productAmount++},deleteProductAmount(){this.productAmount--},loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,qt.Z.get(`${Ht}/api/products/${this.$route.params.id}`).then((t=>{this.productData=t.data,this.productColorId=t.data.colors[0].color.id,this.productSizeId=t.data.sizes[0].id,this.img=this.productImage[0]})).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoading=!1))},switchImage(t){const e=t.target;this.img=e.src,this.productImage.find(((t,r)=>{String(t)===e.src&&(this.productColorId=this.productColors[r].id)}))},cahngeImageAndColor(t){this.img=this.productImage[t]},changeDeliveryInfo(){this.productInfo=!1,this.deliveryInfo=!0},changeProductInfo(){this.productInfo=!0,this.deliveryInfo=!1}},created(){this.loadProducts()},beforeRouteUpdate(){this.loadProducts()}};const sr=(0,v.Z)(or,[["render",ar]]);var ir=sr;const lr={class:"content container"},cr={class:"content__top"},nr=(0,o.uE)('<ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="index.html"> Каталог </a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link"> Корзина </a></li></ul>',1),dr={class:"content__row"},ur=(0,o._)("h1",{class:"content__title"},"Корзина",-1),_r={class:"content__info"},pr={class:"cart"},mr={class:"cart__form form",action:"#",method:"POST"},hr={key:0,class:"content__title"},gr=(0,o._)("img",{src:"img/svg/1488.gif"},null,-1),fr={key:1,class:"cart__field"},yr={class:"cart__list"},br={class:"cart__block"},kr=(0,o._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),vr={class:"cart__price"},wr=["onClick","disabled"];function Ir(t,e,r,s,i,l){const c=(0,o.up)("CartItem"),n=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("main",lr,[(0,o._)("div",cr,[nr,(0,o._)("div",dr,[ur,(0,o._)("span",_r,(0,u.zw)(t.totalAmoun)+" товара ",1)])]),(0,o._)("section",pr,[(0,o._)("form",mr,[!0===t.$store.state.productAddCart?((0,o.wg)(),(0,o.iD)("div",hr,[(0,o.Uk)(" Загрузка товаров... "),gr])):((0,o.wg)(),(0,o.iD)("div",fr,[(0,o._)("ul",yr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.j4)(c,{key:t.productId,item:t},null,8,["item"])))),128))])])),(0,o._)("div",br,[kr,(0,o._)("p",vr,[(0,o.Uk)(" Итого: "),(0,o._)("span",null,(0,u.zw)(l.totalPricePretty)+" ₽",1)]),(0,o.wy)((0,o.Wm)(n,{to:{name:"order"},custom:""},{default:(0,o.w5)((({navigate:t})=>[(0,o._)("button",{onClick:t,disabled:l.emptyBasket,class:"cart__button button button--primery",type:"button"}," Оформить заказ ",8,wr)])),_:1},512),[[a.F8,t.products.length>0]])])])])])}const Pr={class:"cart__item product"},Cr={class:"product__pic"},Dr=["src","alt"],zr={class:"product__title"},Ar={class:"product__info product__info--color"},Ur={class:"product__info"},Fr={class:"product__code"},Tr={class:"product__counter form__counter"},$r=["disabled"],Vr=(0,o._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),xr=[Vr],Kr=(0,o._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),Sr=[Kr],Mr={class:"product__price"},Zr=(0,o._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-close"})],-1),Or=[Zr];function Er(t,e,r,s,i,l){return(0,o.wg)(),(0,o.iD)("li",Pr,[(0,o._)("div",Cr,[(0,o._)("img",{src:l.productImage,width:"120",height:"120",alt:r.item.product.title},null,8,Dr)]),(0,o._)("h3",zr,(0,u.zw)(r.item.product.title),1),(0,o._)("p",Ar,[(0,o.Uk)(" Цвет: "),(0,o._)("span",null,[(0,o._)("i",{style:(0,u.j5)({background:r.item.color.color.code})},null,4),(0,o.Uk)(" "+(0,u.zw)(r.item.color.color.title),1)]),(0,o._)("span",Ur," Размер: "+(0,u.zw)(r.item.size.title),1)]),(0,o._)("span",Fr," Артикул: "+(0,u.zw)(r.item.product.id),1),(0,o._)("div",Tr,[(0,o._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=t=>l.amount--),disabled:l.amount<=0},xr,8,$r),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>l.amount=t),name:"count"},null,512),[[a.nr,l.amount,void 0,{number:!0}]]),(0,o._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=t=>l.amount++)},Sr)]),(0,o._)("b",Mr,(0,u.zw)(l.pricePretty)+" ₽ ",1),(0,o._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:e[3]||(e[3]=(0,a.iM)((e=>t.deleteCartProduct(r.item.itemId)),["prevent"]))},Or)])}var Wr={data(){return{basketLoading:!1}},props:["item"],computed:{amount:{get(){return this.item.amount},set(t){this.$store.dispatch("updateCartProductAmount",{productId:this.item.itemId,amount:t})}},productImage(){return this.item.color.gallery.map((t=>t.file.url))},pricePretty(){return Q(this.item.product.price*this.item.amount)}},methods:{...(0,P.nv)(["deleteCartProduct"])}};const Lr=(0,v.Z)(Wr,[["render",Er]]);var jr=Lr,Yr={components:{CartItem:jr},computed:{...(0,P.Se)({products:"cartDetailProducts",totalPrice:"catrTotalPrise",totalAmoun:"catrTotalAmount"}),totalPricePretty(){return Q(this.totalPrice)},emptyBasket(){return 0===this.totalAmoun}}};const qr=(0,v.Z)(Yr,[["render",Ir]]);var Hr=qr;const Br={class:"content container"},Nr={class:"content__top"},Gr={class:"breadcrumbs"},Qr={class:"breadcrumbs__item"},Rr={class:"breadcrumbs__item"},Jr={class:"breadcrumbs__item"},Xr=(0,o._)("h1",{class:"content__title"},"Корзина",-1),ta={class:"cart"},ea={class:"cart__field"},ra={class:"cart__data"},aa={class:"cart__options"},oa=(0,o._)("h3",{class:"cart__title"},"Доставка",-1),sa={class:"cart__options options"},ia={class:"options__label"},la=["value","onChange","checked"],ca={class:"options__value"},na=(0,o._)("h3",{class:"cart__title"},"Оплата",-1),da={class:"cart__options options"},ua={class:"options__label"},_a=["value","checked"],pa={class:"options__value"},ma={class:"cart__block"},ha={class:"cart__orders"},ga={class:"cart__total"},fa=(0,o._)("button",{class:"cart__button button button--primery",type:"submit",style:{"margin-bottom":"15px"}}," Оформить заказ ",-1),ya={class:"header__info"},ba=(0,o._)("img",{src:"img/svg/1496.gif"},null,-1),ka={class:"cart__error form__error-block"},va=(0,o._)("h4",null,"Заявка не отправлена!",-1);function wa(t,e,r,s,i,l){const c=(0,o.up)("router-link"),n=(0,o.up)("BaseFormText"),d=(0,o.up)("BaseFormTextarea");return(0,o.wg)(),(0,o.iD)("main",Br,[(0,o._)("div",Nr,[(0,o._)("ul",Gr,[(0,o._)("li",Qr,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",Rr,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),(0,o._)("li",Jr,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"order"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Оформление заказа ")])),_:1})])]),Xr]),(0,o._)("section",ta,[(0,o._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:e[7]||(e[7]=(0,a.iM)(((...t)=>l.order&&l.order(...t)),["prevent"]))},[(0,o._)("div",ea,[(0,o._)("div",ra,[(0,o.Wm)(n,{title:"ФИО",error:i.formError.name,placeholder:"Введите ваше полное имя",modelValue:i.formData.name,"onUpdate:modelValue":e[0]||(e[0]=t=>i.formData.name=t),type:"text"},null,8,["error","modelValue"]),(0,o.Wm)(n,{title:"Адрес доставки",error:i.formError.address,placeholder:"Введите ваш адрес",modelValue:i.formData.address,"onUpdate:modelValue":e[1]||(e[1]=t=>i.formData.address=t),type:"text"},null,8,["error","modelValue"]),(0,o.Wm)(n,{title:"Телефон",error:i.formError.phone,placeholder:"Введите ваш телефон",modelValue:i.formData.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>i.formData.phone=t),type:"tel"},null,8,["error","modelValue"]),(0,o.Wm)(n,{title:"Email",error:i.formError.email,placeholder:"Введи ваш Email",modelValue:i.formData.email,"onUpdate:modelValue":e[3]||(e[3]=t=>i.formData.email=t),type:"email"},null,8,["error","modelValue"]),(0,o.Wm)(d,{title:"Комментарий к заказу",error:i.formDataComment,placeholder:"Ваши пожелания",modelValue:i.formData.comment,"onUpdate:modelValue":e[4]||(e[4]=t=>i.formData.comment=t)},null,8,["error","modelValue"])]),(0,o._)("div",aa,[oa,(0,o._)("ul",sa,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.deliveries,((t,r)=>((0,o.wg)(),(0,o.iD)("li",{class:"options__item",key:t.id},[(0,o._)("label",ia,[(0,o.wy)((0,o._)("input",{class:"options__radio sr-only",type:"radio",name:"delivery",value:t.id,"onUpdate:modelValue":e[5]||(e[5]=t=>i.deliveryId=t),onChange:e=>l.currentDeliveryPrice(t.price),checked:0===r},null,40,la),[[a.G2,i.deliveryId]]),(0,o._)("span",ca,[(0,o.Uk)((0,u.zw)(t.title)+" ",1),(0,o._)("b",null,(0,u.zw)(t.price)+" ₽",1)])])])))),128))]),na,(0,o._)("ul",da,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.payments,((t,r)=>((0,o.wg)(),(0,o.iD)("li",{class:"options__item",key:t.id},[(0,o._)("label",ua,[(0,o.wy)((0,o._)("input",{class:"options__radio sr-only",type:"radio",name:"pay",value:t.id,"onUpdate:modelValue":e[6]||(e[6]=t=>i.paymentId=t),checked:0===r},null,8,_a),[[a.G2,i.paymentId]]),(0,o._)("span",pa,(0,u.zw)(t.title),1)])])))),128))])])]),(0,o._)("div",ma,[(0,o._)("ul",ha,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.productNormalized,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"cart__order",key:t.id},[(0,o._)("h3",null,(0,u.zw)(t.product.title),1),(0,o._)("b",null,(0,u.zw)(t.pricePretty)+" ₽",1),(0,o._)("span",null,"Артикул: "+(0,u.zw)(t.product.id),1)])))),128))]),(0,o._)("div",ga,[(0,o._)("p",null,[(0,o.Uk)(" Доставка: "),(0,o._)("b",null,(0,u.zw)(i.deliveryPrice)+" ₽",1)]),(0,o._)("p",null,[(0,o.Uk)(" Итого: "),(0,o._)("b",null,(0,u.zw)(t.totalAmoun),1),(0,o.Uk)(" товара на сумму "),(0,o._)("b",null,(0,u.zw)(l.totalPricePretty)+" ₽",1)])]),fa,(0,o.wy)((0,o._)("div",ya,[(0,o.Uk)(" Отправляем заказ... "),ba],512),[[a.F8,i.sendingOrder]])]),(0,o.wy)((0,o._)("div",ka,[va,(0,o._)("p",null,(0,u.zw)(i.formErrorMessage),1)],512),[[a.F8,i.sendingOrderError]])],32)])])}const Ia=["type","placeholder"];function Pa(t,e,r,s,i,l){const c=(0,o.up)("BaseFormField");return(0,o.wg)(),(0,o.j4)(c,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("input",{class:"form__input","onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),type:r.type,placeholder:t.placeholder},null,8,Ia),[[a.YZ,t.dataValue]])])),_:1},8,["title","error"])}const Ca={class:"form__label"},Da={class:"form__value"},za={key:0,class:"form__error"};function Aa(t,e,r,a,s,i){return(0,o.wg)(),(0,o.iD)("label",Ca,[(0,o.WI)(t.$slots,"default"),(0,o._)("span",Da,(0,u.zw)(r.title),1),r.error?((0,o.wg)(),(0,o.iD)("span",za,(0,u.zw)(r.error),1)):(0,o.kq)("",!0)])}var Ua={props:["title","error"]};const Fa=(0,v.Z)(Ua,[["render",Aa]]);var Ta=Fa,$a={props:["title","error","placeholder","modelValue"],components:{BaseFormField:Ta},computed:{dataValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},Va={props:["type"],mixins:[$a]};const xa=(0,v.Z)(Va,[["render",Pa]]);var Ka=xa;const Sa=["placeholder"];function Ma(t,e,r,s,i,l){const c=(0,o.up)("BaseFormField");return(0,o.wg)(),(0,o.j4)(c,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("input",{class:"form__input form__input--area","onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),type:"text",placeholder:t.placeholder},null,8,Sa),[[a.nr,t.dataValue]])])),_:1},8,["title","error"])}var Za={mixins:[$a]};const Oa=(0,v.Z)(Za,[["render",Ma]]);var Ea=Oa,Wa={components:{BaseFormText:Ka,BaseFormTextarea:Ea},data(){return{formData:{},formDataComment:"",formError:{},formErrorMessage:"",sendingOrder:!1,sendingOrderError:!1,deliveries:[],deliveryId:null,deliveryPrice:null,payments:[],paymentId:null}},methods:{order(){this.formError={},this.formErrorMessage="",this.sendingOrder=!0,this.sendingOrderError=!1,qt.Z.post(`${Ht}/api/orders`,{...this.formData,deliveryTypeId:this.deliveryId,paymentTypeId:this.paymentId,comment:this.formDataComment},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}}),this.sendingOrder=!1})).catch((t=>{this.formError=t.response.data.error.request||{},""===t.response.data.error.message?this.formErrorMessage="Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу.":this.formErrorMessage=t.response.data.error.message,this.sendingOrder=!1,this.sendingOrderError=!0}))},loadDeliveries(){qt.Z.get(`${Ht}/api/deliveries`).then((t=>{this.deliveries=t.data,this.deliveryId=this.deliveries[0].id,this.deliveryPrice=this.deliveries[0].price}))},loadPayments(){qt.Z.get(`${Ht}/api/payments`,{params:{deliveryTypeId:this.deliveryId}}).then((t=>{this.payments=t.data,this.paymentId=this.payments[0].id}))},currentDeliveryPrice(t){this.deliveryPrice=t}},computed:{...(0,P.Se)({products:"cartDetailProducts",totalPrice:"catrTotalPrise",totalAmoun:"catrTotalAmount"}),totalPricePretty(){return Q(this.totalPrice+Number(this.deliveryPrice))},productNormalized(){return this.products.map((t=>({...t,pricePretty:Q(t.product.price)})))}},created(){this.loadDeliveries()},watch:{deliveryId(){this.loadPayments()}}};const La=(0,v.Z)(Wa,[["render",wa]]);var ja=La;const Ya={key:0,class:"content container"},qa={class:"content__top"},Ha={class:"breadcrumbs"},Ba={class:"breadcrumbs__item"},Na={class:"breadcrumbs__item"},Ga=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),Qa={class:"content__title"},Ra={class:"cart"},Ja={class:"cart__form form",action:"#",method:"POST"},Xa={class:"cart__field"},to=(0,o._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),eo={class:"dictionary"},ro={class:"dictionary__item"},ao=(0,o._)("span",{class:"dictionary__key"}," Получатель ",-1),oo={class:"dictionary__value"},so={class:"dictionary__item"},io=(0,o._)("span",{class:"dictionary__key"}," Адрес ",-1),lo={class:"dictionary__value"},co={class:"dictionary__item"},no=(0,o._)("span",{class:"dictionary__key"}," Телефон ",-1),uo={class:"dictionary__value"},_o={class:"dictionary__item"},po=(0,o._)("span",{class:"dictionary__key"}," Email ",-1),mo={class:"dictionary__value"},ho={class:"dictionary__item"},go=(0,o._)("span",{class:"dictionary__key"}," Способ оплаты ",-1),fo={class:"dictionary__value"},yo={class:"cart__block"},bo={class:"cart__orders"},ko={class:"cart__total"};function vo(t,e,r,a,s,i){const l=(0,o.up)("router-link");return i.order?((0,o.wg)(),(0,o.iD)("main",Ya,[(0,o._)("div",qa,[(0,o._)("ul",Ha,[(0,o._)("li",Ba,[(0,o.Wm)(l,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",Na,[(0,o.Wm)(l,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),Ga]),(0,o._)("h1",Qa,[(0,o.Uk)(" Заказ оформлен "),(0,o._)("span",null,"№ "+(0,u.zw)(t.$store.state.orderInfo.id),1)])]),(0,o._)("section",Ra,[(0,o._)("form",Ja,[(0,o._)("div",Xa,[to,(0,o._)("ul",eo,[(0,o._)("li",ro,[ao,(0,o._)("span",oo,(0,u.zw)(i.order.name),1)]),(0,o._)("li",so,[io,(0,o._)("span",lo,(0,u.zw)(i.order.address),1)]),(0,o._)("li",co,[no,(0,o._)("span",uo,(0,u.zw)(i.order.phone),1)]),(0,o._)("li",_o,[po,(0,o._)("span",mo,(0,u.zw)(i.order.email),1)]),(0,o._)("li",ho,[go,(0,o._)("span",fo,(0,u.zw)(i.order.paymentType),1)])])]),(0,o._)("div",yo,[(0,o._)("ul",bo,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.order.basket.items,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"cart__order",key:t.id},[(0,o._)("h3",null,(0,u.zw)(t.product.title),1),(0,o._)("b",null,(0,u.zw)(t.price*t.quantity)+" ₽",1),(0,o._)("span",null,"Артикул: "+(0,u.zw)(t.product.id),1)])))),128))]),(0,o._)("div",ko,[(0,o._)("p",null,[(0,o.Uk)(" Доставка: "),(0,o._)("b",null,(0,u.zw)(i.order.deliveryType.price)+" ₽",1)]),(0,o._)("p",null,[(0,o.Uk)(" Итого: "),(0,o._)("b",null,(0,u.zw)(i.totalAmoun),1),(0,o.Uk)(" товара на сумму "),(0,o._)("b",null,(0,u.zw)(i.order.totalPrice+Number(i.order.deliveryType.price))+" ₽",1)])])])])])])):(0,o.kq)("",!0)}var wo={data(){return{productData:null}},created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id)},computed:{order(){return this.$store.state.orderInfo||null},basketProducts(){return this.order.basket.items?this.order.basket.items.slice():[]},totalAmoun(){return this.basketProducts.reduce(((t,e)=>e.quantity+t),0)}}};const Io=(0,v.Z)(wo,[["render",vo]]);var Po=Io;const Co=[{name:"main",component:Jt,path:"/"},{name:"product",component:ir,path:"/product/:id",props:!0},{name:"notFound",component:re,path:"/:pathMatch(.*)*"},{name:"cart",component:Hr,path:"/cart"},{name:"order",component:ja,path:"/order"},{name:"orderInfo",component:Po,path:"/order/:id"}],Do=(0,A.p7)({history:(0,A.r5)(Co),routes:Co});var zo=Do,Ao=(0,P.MT)({state:{cartProducts:[],userAccessKey:null,cartProductsData:[],productAddCart:!1,orderInfo:null},mutations:{updateOrderInfo(t,e){t.orderInfo=e},resetCart(t){t.cartProducts=[],t.cartProductsData=[]},updateCartProductAmount(t,{productId:e,amount:r}){const a=t.cartProducts.find((t=>t.productId===e));a&&(a.amount=r)},deleteCartProduct(t,e){t.cartProducts=t.cartProducts.filter((t=>t.productId!==e))},updateUserAccessKey(t,e){t.userAccessKey=e},updateCartProductsData(t,e){t.cartProductsData=e},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,itemId:t.id,amount:t.quantity})))}},getters:{cartDetailProducts(t){return t.cartProducts.map((e=>{const{product:r,id:a,color:o,size:s}=t.cartProductsData.find((t=>t.id===e.itemId));return{...e,itemId:a,size:{...s},color:{...o},product:{...r,image:r.colors.map((t=>t.gallery.map((t=>t.file.url))))}}}))},catrTotalPrise(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.product.price*e.amount+t),0)},catrTotalAmount(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.amount+t),0)}},actions:{loadOrderInfo(t,e){return qt.Z.get(`${Ht}/api/orders/${e}`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateOrderInfo",e.data)}))},loadCart(t){return t.state.productAddCart=!0,new Promise((t=>setTimeout(t,3e3))).then((()=>qt.Z.get(`${Ht}/api/baskets`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")})))).then((()=>t.state.productAddCart=!1))},addProductToCart(t,{productId:e,amount:r,colorId:a,sizeId:o}){return t.state.productAddCart=!0,new Promise((t=>setTimeout(t,3e3))).then((()=>qt.Z.post(`${Ht}/api/baskets/products`,{productId:e,quantity:r,colorId:a,sizeId:o},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")})))).then((()=>t.state.productAddCart=!1))},updateCartProductAmount(t,{productId:e,amount:r}){if(t.commit("updateCartProductAmount",{productId:e,amount:r}),!(r<1))return qt.Z.put(`${Ht}/api/baskets/products`,{basketItemId:e,quantity:r},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")}))},deleteCartProduct(t,e){return qt.Z["delete"](`${Ht}/api/baskets/products`,{data:{basketItemId:e},params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")}))}}});const Uo=(0,a.ri)({render:()=>(0,o.h)(z)});Uo.use(zo),Uo.use(Ao),Uo.mount("#app")}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,r),s.exports}r.m=t,function(){var t=[];r.O=function(e,a,o,s){if(!a){var i=1/0;for(d=0;d<t.length;d++){a=t[d][0],o=t[d][1],s=t[d][2];for(var l=!0,c=0;c<a.length;c++)(!1&s||i>=s)&&Object.keys(r.O).every((function(t){return r.O[t](a[c])}))?a.splice(c--,1):(l=!1,s<i&&(i=s));if(l){t.splice(d--,1);var n=o();void 0!==n&&(e=n)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[a,o,s]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,s,i=a[0],l=a[1],c=a[2],n=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(c)var d=c(r)}for(e&&e(a);n<i.length;n++)s=i[n],r.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return r.O(d)},a=self["webpackChunkproekt"]=self["webpackChunkproekt"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(8591)}));a=r.O(a)})();
//# sourceMappingURL=app.f1d15088.js.map